"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8727],{8727:(b,M,r)=>{r.r(M),r.d(M,{RegisterPageModule:()=>h});var p=r(6814),u=r(6223),a=r(9843),_=r(3914),d=r(5861),e=r(5879),m=r(2333),f=r(3258);const n=[{path:"",component:(()=>{var t;class s{constructor(g,i,o,l,C){this.auth=g,this.firestore=i,this.authService=o,this.alertCtrl=l,this.router=C,this.acceptTerms=!1,this.nombre="",this.email="",this.password="",this.rolSeleccionado="alumno"}registrarUser(g,i){var o=this;return(0,d.Z)(function*(){try{const l=yield o.authService.registrarUser(g,i,o.rolSeleccionado,o.nombre);l.user?(yield o.authService.saveUserInfo(l.user.uid,i,g,o.rolSeleccionado,o.nombre),yield o.mostrarAlerta("\xc9xito","Usuario registrado exitosamente"),o.router.navigate(["/login"])):yield o.mostrarAlerta("Error","Error: usuario es nulo")}catch(l){l instanceof Error?yield o.mostrarAlerta("Error","Error al registrar usuario: "+l.message):yield o.mostrarAlerta("Error","Error al registrar usuario")}})()}mostrarAlerta(g,i){var o=this;return(0,d.Z)(function*(){yield(yield o.alertCtrl.create({header:g,message:i,buttons:["OK"]})).present()})()}}return(t=s).\u0275fac=function(g){return new(g||t)(e.Y36(m.e),e.Y36(f.C),e.Y36(m.e),e.Y36(a.Br),e.Y36(_.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:29,vars:4,consts:[[1,"ion-padding"],[1,"back-button-container"],["defaultHref","/login"],["name","arrow-back"],[1,"register-page"],[1,"register-title"],[3,"ngSubmit"],["name","rolSeleccionado",3,"ngModel","ngModelChange"],["value","alumno"],["value","profesor"],[1,"email-text"],["name","email","type","email","label","Nombre","labelPlacement","floating","placeholder","Ingresa tu nombre",1,"text-2",3,"ngModel","ngModelChange"],["name","email","type","email","label","Email","labelPlacement","floating","placeholder","Ingresa tu email",1,"text-2",3,"ngModel","ngModelChange"],[1,"password-text"],["name","password","type","password","label","Contrase\xf1a","labelPlacement","floating","placeholder","Ingresa tu contrase\xf1a",1,"text-2",3,"ngModel","ngModelChange"],["expand","block","type","submit",1,"boton-login"],[1,"ion-text-register-forget"],[1,"login-text"],["routerLink","/login",1,"login-text-2"]],template:function(g,i){1&g&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"ion-back-button",2),e._UZ(3,"ion-icon",3),e.qZA()(),e.TgZ(4,"div",4)(5,"div",5)(6,"p"),e._uU(7,"Reg\xedstrate"),e.qZA()()(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return i.registrarUser(i.email,i.password)}),e.TgZ(9,"ion-segment",7),e.NdJ("ngModelChange",function(l){return i.rolSeleccionado=l}),e.TgZ(10,"ion-segment-button",8)(11,"ion-label"),e._uU(12,"Alumno"),e.qZA()(),e.TgZ(13,"ion-segment-button",9)(14,"ion-label"),e._uU(15,"Profesor"),e.qZA()()(),e.TgZ(16,"ion-item",10)(17,"ion-input",11),e.NdJ("ngModelChange",function(l){return i.nombre=l}),e.qZA()(),e.TgZ(18,"ion-item",10)(19,"ion-input",12),e.NdJ("ngModelChange",function(l){return i.email=l}),e.qZA()(),e.TgZ(20,"ion-item",13)(21,"ion-input",14),e.NdJ("ngModelChange",function(l){return i.password=l}),e.qZA()(),e.TgZ(22,"ion-button",15),e._uU(23,"Registrarte"),e.qZA()(),e.TgZ(24,"p",16)(25,"a",17),e._uU(26,"\xbfYa tienes una cuenta?"),e.qZA(),e.TgZ(27,"a",18),e._uU(28,"Iniciar sesi\xf3n"),e.qZA()()()),2&g&&(e.xp6(9),e.Q6J("ngModel",i.rolSeleccionado),e.xp6(8),e.Q6J("ngModel",i.nombre),e.xp6(2),e.Q6J("ngModel",i.email),e.xp6(2),e.Q6J("ngModel",i.password))},dependencies:[u._Y,u.JJ,u.JL,u.On,u.F,a.oU,a.YG,a.W2,a.gu,a.pK,a.Ie,a.Q$,a.cJ,a.GO,a.QI,a.j9,a.cs,a.Fo,_.rH],styles:['@charset "UTF-8";.register-title[_ngcontent-%COMP%]{color:#000;font-family:Open Sans,sans-serif;font-weight:bolder;font-size:28px;margin-left:17px}.back-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}ion-back-button[_ngcontent-%COMP%]{margin-right:10px}ion-segment[_ngcontent-%COMP%]{--background: #002138}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: #fff}.boton-login[_ngcontent-%COMP%]{border-radius:20px;margin-top:10px;--background: #002138;--color: #ffffff}.text-2[_ngcontent-%COMP%], .text-TyC[_ngcontent-%COMP%]{color:#717171;margin-right:90px}.text-TyC[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{text-align:left}ion-checkbox[_ngcontent-%COMP%]{--size: 22px;--background: #ffffff;--checkbox-background: #ffffff;--checkbox-background-checked: #FBB41C;margin-top:20px}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:7px;border:2px solid #FBB41C}.login-text[_ngcontent-%COMP%]{color:#717171;margin-right:90px}.login-text-2[_ngcontent-%COMP%]{color:#fbb41c;float:right}']}),s})()}];let c=(()=>{var t;class s{}return(t=s).\u0275fac=function(g){return new(g||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(n),_.Bz]}),s})(),h=(()=>{var t;class s{}return(t=s).\u0275fac=function(g){return new(g||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,u.u5,a.Pc,c]}),s})()},2333:(b,M,r)=>{r.d(M,{e:()=>e});var p=r(5861),u=r(5879),a=r(7213),_=r(9027),d=r(3914);let e=(()=>{var m;class f{constructor(n,c,h){this.authfirebase=n,this.firestore=c,this.router=h}login(n,c){return this.authfirebase.signInWithEmailAndPassword(n,c)}logout(){this.authfirebase.signOut()}registrarUser(n,c,h,t){return this.authfirebase.createUserWithEmailAndPassword(n,c).then(s=>(s.user&&this.saveUserInfo(s.user.uid,n,c,h,t),s))}saveUserInfo(n,c,h,t,s){this.firestore.collection("Usuarios").doc(n).set({nombre:s,email:h,password:c,uid:n,rol:t})}getUserRole(){var n=this;return(0,p.Z)(function*(){const c=yield n.authfirebase.currentUser;c?n.firestore.collection("Usuarios").doc(c.uid).get().subscribe(h=>{if(h.exists){const s=h.data().rol;n.redirectByRole(s)}else n.router.navigate(["/login"])}):n.router.navigate(["/login"])})()}redirectByRole(n){switch(n){case"alumno":this.router.navigate(["/home"]);break;case"profesor":this.router.navigate(["/pro-home"])}}getQRCodeData(){return this.http.get("url_a_tu_base_de_datos")}}return(m=f).\u0275fac=function(n){return new(n||m)(u.LFG(a.zQ),u.LFG(_.ST),u.LFG(d.F0))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),f})()},3258:(b,M,r)=>{r.d(M,{C:()=>_});var p=r(5879),u=r(9027),a=r(7213);let _=(()=>{var d;class e{getUsuarios(){throw new Error("Method not implemented.")}getQRCodeData(){throw new Error("Method not implemented.")}collection(f){throw new Error("Method not implemented.")}createDoc(f,v,n){throw new Error("Method not implemented.")}constructor(f,v){this.firestore=f,this.authFirebase=v}getAsignaturas(){return this.firestore.collection("asignaturas").valueChanges()}getAsistencia(){return this.firestore.collection("asignaturas").valueChanges()}}return(d=e).\u0275fac=function(f){return new(f||d)(p.LFG(u.ST),p.LFG(a.zQ))},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),e})()}}]);