"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9927],{2957:(V,R,l)=>{l.d(R,{G:()=>$});const $={FRONT:"front",BACK:"back"}},2726:(V,R,l)=>{l.d(R,{Uw:()=>X,fo:()=>E});var c=l(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var C=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(C||{});class H extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const b=n=>{var e,t,i,a,r;const f=n.CapacitorCustomPlatform||null,s=n.Capacitor||{},P=s.Plugins=s.Plugins||{},g=n.CapacitorPlatforms,G=(null===(e=null==g?void 0:g.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==f?f.name:(n=>{var e,t;return null!=n&&n.androidBridge?"android":null!==(t=null===(e=null==n?void 0:n.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(n)),ue=(null===(t=null==g?void 0:g.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==G()),fe=(null===(i=null==g?void 0:g.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(h=>{const p=te.get(h);return!!(null!=p&&p.platforms.has(G())||ae(h))}),ae=(null===(a=null==g?void 0:g.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(h=>{var p;return null===(p=s.PluginHeaders)||void 0===p?void 0:p.find(N=>N.name===h)}),te=new Map,Pe=(null===(r=null==g?void 0:g.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((h,p={})=>{const N=te.get(h);if(N)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),N.proxy;const B=G(),z=ae(h);let S;const ve=function(){var v=(0,c.Z)(function*(){return!S&&B in p?S=S="function"==typeof p[B]?yield p[B]():p[B]:null!==f&&!S&&"web"in p&&(S=S="function"==typeof p.web?yield p.web():p.web),S});return function(){return v.apply(this,arguments)}}(),ne=v=>{let _;const L=(...k)=>{const j=ve().then(U=>{const F=((v,_)=>{var L,k;if(!z){if(v)return null===(k=v[_])||void 0===k?void 0:k.bind(v);throw new H(`"${h}" plugin is not implemented on ${B}`,C.Unimplemented)}{const j=null==z?void 0:z.methods.find(U=>_===U.name);if(j)return"promise"===j.rtype?U=>s.nativePromise(h,_.toString(),U):(U,F)=>s.nativeCallback(h,_.toString(),U,F);if(v)return null===(L=v[_])||void 0===L?void 0:L.bind(v)}})(U,v);if(F){const Q=F(...k);return _=null==Q?void 0:Q.remove,Q}throw new H(`"${h}.${v}()" is not implemented on ${B}`,C.Unimplemented)});return"addListener"===v&&(j.remove=(0,c.Z)(function*(){return _()})),j};return L.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:v,writable:!1,configurable:!1}),L},le=ne("addListener"),ce=ne("removeListener"),_e=(v,_)=>{const L=le({eventName:v},_),k=function(){var U=(0,c.Z)(function*(){const F=yield L;ce({eventName:v,callbackId:F},_)});return function(){return U.apply(this,arguments)}}(),j=new Promise(U=>L.then(()=>U({remove:k})));return j.remove=(0,c.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),j},oe=new Proxy({},{get(v,_){switch(_){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?_e:le;case"removeListener":return ce;default:return ne(_)}}});return P[h]=oe,te.set(h,{name:h,proxy:oe,platforms:new Set([...Object.keys(p),...z?[B]:[]])}),oe});return s.convertFileSrc||(s.convertFileSrc=h=>h),s.getPlatform=G,s.handleError=h=>n.console.error(h),s.isNativePlatform=ue,s.isPluginAvailable=fe,s.pluginMethodNoop=(h,p,N)=>Promise.reject(`${N} does not have an implementation of "${p}".`),s.registerPlugin=Pe,s.Exception=H,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},w=(n=>n.Capacitor=b(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),E=w.registerPlugin;class X{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var i=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const f=function(){var P=(0,c.Z)(function*(){return i.removeListener(e,t)});return function(){return P.apply(this,arguments)}}(),s=Promise.resolve({remove:f});return Object.defineProperty(s,"remove",{value:(P=(0,c.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield f()}),function(){return P.apply(this,arguments)})}),s;var P}removeAllListeners(){var e=this;return(0,c.Z)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t){const i=this.listeners[e];i&&i.forEach(a=>a(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new w.Exception(e,C.Unimplemented)}unavailable(e="not available"){return new w.Exception(e,C.Unavailable)}removeListener(e,t){var i=this;return(0,c.Z)(function*(){const a=i.listeners[e];if(!a)return;const r=a.indexOf(t);i.listeners[e].splice(r,1),i.listeners[e].length||i.removeWindowListener(i.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const O=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),T=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class d extends X{getCookies(){return(0,c.Z)(function*(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[a,r]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=T(a).trim(),r=T(r).trim(),t[a]=r}),t})()}setCookie(e){return(0,c.Z)(function*(){try{const t=O(e.key),i=O(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),f=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${a}; path=${r}; ${f};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,c.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,c.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,c.Z)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}E("CapacitorCookies",{web:()=>new d});const M=function(){var n=(0,c.Z)(function*(e){return new Promise((t,i)=>{const a=new FileReader;a.onload=()=>{const r=a.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},a.onerror=r=>i(r),a.readAsDataURL(e)})});return function(t){return n.apply(this,arguments)}}();class q extends X{request(e){return(0,c.Z)(function*(){const t=((n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,r,f)=>(a[r]=n[e[f]],a),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[f,s]of Object.entries(n.data||{}))r.set(f,s);t.body=r.toString()}else if(a.includes("multipart/form-data")){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((s,P)=>{r.append(P,s)});else for(const s of Object.keys(n.data))r.append(s,n.data[s]);t.body=r;const f=new Headers(t.headers);f.delete("content-type"),t.headers=f}else(a.includes("application/json")||"object"==typeof n.data)&&(t.body=JSON.stringify(n.data));return t})(e,e.webFetchExtra),i=((n,e=!0)=>n?Object.entries(n).reduce((i,a)=>{const[r,f]=a;let s,P;return Array.isArray(f)?(P="",f.forEach(g=>{s=e?encodeURIComponent(g):g,P+=`${r}=${s}&`}),P.slice(0,-1)):(s=e?encodeURIComponent(f):f,P=`${r}=${s}`),`${i}&${P}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=i?`${e.url}?${i}`:e.url,r=yield fetch(a,t),f=r.headers.get("content-type")||"";let P,g,{responseType:s="text"}=r.ok?e:{};switch(f.includes("application/json")&&(s="json"),s){case"arraybuffer":case"blob":g=yield r.blob(),P=yield M(g);break;case"json":P=yield r.json();break;default:P=yield r.text()}const J={};return r.headers.forEach((G,ee)=>{J[ee]=G}),{data:P,headers:J,status:r.status,url:r.url}})()}get(e){var t=this;return(0,c.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,c.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,c.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,c.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,c.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}E("CapacitorHttp",{web:()=>new q})},9927:(V,R,l)=>{l.r(R),l.d(R,{HomePageModule:()=>X});var c=l(6814),m=l(9843),$=l(6223),D=l(3914),W=l(5861),K=l(2726);l(2957);const C=(0,K.fo)("BarcodeScanner",{web:()=>l.e(7606).then(l.bind(l,7606)).then(u=>new u.BarcodeScannerWeb)}),H=(0,K.fo)("Geolocation",{web:()=>l.e(579).then(l.bind(l,579)).then(u=>new u.GeolocationWeb)});var o=l(5879),b=l(2333),A=l(9027),w=l(7213);const re=[{path:"",component:(()=>{var u;class O{constructor(d,y,M,Z,Y,I){this.navCtrl=d,this.auth=y,this.alertCtrl=M,this.router=Z,this.firestore=Y,this.afAuth=I}openUserProfile(){this.navCtrl.navigateForward("/perfil-usuario")}logout(){var d=this;return(0,W.Z)(function*(){yield(yield d.alertCtrl.create({header:"Confirmar logout",message:"\xbfEst\xe1s seguro de que deseas salir de la sesi\xf3n?",buttons:[{text:"No",role:"cancel",cssClass:"alert-button-cancel"},{text:"S\xed",cssClass:"alert-button-confirm",handler:()=>{d.performLogout()}}]})).present()})()}performLogout(){this.auth.logout(),this.navCtrl.navigateRoot("/login"),console.log("logout exitoso")}iniciarEscaneo(){var d=this;return(0,W.Z)(function*(){try{const y=yield d.obtenerUbicacionActual();if(d.estaDentroDePerimetro(y,{lat:-33.59855167900821,lng:-70.57906197139616})){const Z=yield C.startScan();if(Z&&Z.hasContent){C.showBackground(),C.stopScan();const Y=Z.content;let I=yield d.afAuth.currentUser;const q=null==I?void 0:I.uid,se="Nombre del profesor",n=(new Date).toISOString(),e=d.firestore.collection("registro_asistencias").doc(),t={id_profesor:q,nombre_profesor:se,asignatura:"Asignatura",fecha_hora_generacion:n,datos_escaneo:Y};yield e.set(t);const i=e.collection("asistencias_alumnos"),a={nombre:"Nombre del alumno",asignatura:"Asignatura",estado:"ausente"};yield i.add(a),d.router.navigate(["/asistencia-alumno"])}}else console.log("Fuera del per\xedmetro permitido")}catch(y){console.error("Error al escanear:",y)}})()}obtenerUbicacionActual(){return(0,W.Z)(function*(){return(yield H.getCurrentPosition()).coords})()}estaDentroDePerimetro(d,y){return Math.sqrt(Math.pow(d.latitude-y.lat,2)+Math.pow(d.longitude-y.lng,2))<=.01}}return(u=O).\u0275fac=function(d){return new(d||u)(o.Y36(m.SH),o.Y36(b.e),o.Y36(m.Br),o.Y36(D.F0),o.Y36(A.ST),o.Y36(w.zQ))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"ion-padding"],[1,"welcome-toolbar"],["slot","start"],[3,"click"],["name","person-circle",1,"icon-user"],[1,"ion-text-center"],[1,"logo-container"],["src","../../../assets/RegisterAPPlogo.svg","alt","Logo de la aplicaci\xf3n"],["expand","block","type","submit",1,"boton-centro",3,"click"],["routerLink","/asistencia-alumno","expand","block","type","submit",1,"boton-centro"],[1,"ion-text-register-forget"],["routerLink","/#",1,"ion-text-help"],["expand","block","type","submit",1,"boton-login",3,"click"],["name","log-out","slot","start"]],template:function(d,y){1&d&&(o.TgZ(0,"ion-content",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),o.NdJ("click",function(){return y.openUserProfile()}),o._UZ(4,"ion-icon",4),o.qZA()(),o.TgZ(5,"ion-title",5),o._uU(6,"Bienvenido :)"),o.qZA()(),o.TgZ(7,"div",6),o._UZ(8,"ion-img",7),o.qZA(),o.TgZ(9,"ion-button",8),o.NdJ("click",function(){return y.iniciarEscaneo()}),o._uU(10,"Registra tu asistencia"),o.qZA(),o.TgZ(11,"ion-button",9),o._uU(12,"Asistencias"),o.qZA(),o.TgZ(13,"div")(14,"p",10)(15,"a",11),o._uU(16,"\xbfNecesitas ayuda?"),o.qZA(),o.TgZ(17,"ion-button",12),o.NdJ("click",function(){return y.logout()}),o._UZ(18,"ion-icon",13),o._uU(19," Logout "),o.qZA()()()())},dependencies:[m.YG,m.Sm,m.W2,m.gu,m.Xz,m.wd,m.sr,m.YI,m.Fo,D.rH],styles:['@charset "UTF-8";.welcome-toolbar[_ngcontent-%COMP%]{--background: #ffffff}.ion-text-center[_ngcontent-%COMP%]{color:#000;font-family:Open Sans,sans-serif;font-weight:bolder;font-size:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;display:flex;align-items:center;justify-content:flex-start}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:40vh;margin-bottom:20px}.ion-img[_ngcontent-%COMP%]{width:auto;height:auto}.icon-user[_ngcontent-%COMP%]{font-size:50px;color:#002138}.boton-centro[_ngcontent-%COMP%]{border-radius:20px;margin-top:50px;--background: #002138;--color: #ffffff}ion-button.boton-login[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px;position:absolute;bottom:10px;left:10px;--background: #002138}ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.help-text[_ngcontent-%COMP%]{margin-left:flex;margin-top:flex}.ion-text-help[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;margin:20px;font-size:14px}']}),O})()}];let ie=(()=>{var u;class O{}return(u=O).\u0275fac=function(d){return new(d||u)},u.\u0275mod=o.oAB({type:u}),u.\u0275inj=o.cJS({imports:[D.Bz.forChild(re),D.Bz]}),O})(),X=(()=>{var u;class O{}return(u=O).\u0275fac=function(d){return new(d||u)},u.\u0275mod=o.oAB({type:u}),u.\u0275inj=o.cJS({imports:[c.ez,$.u5,m.Pc,ie]}),O})()},2333:(V,R,l)=>{l.d(R,{e:()=>K});var c=l(5861),m=l(5879),$=l(7213),D=l(9027),W=l(3914);let K=(()=>{var x;class C{constructor(o,b,A){this.authfirebase=o,this.firestore=b,this.router=A}login(o,b){return this.authfirebase.signInWithEmailAndPassword(o,b)}logout(){this.authfirebase.signOut()}registrarUser(o,b,A,w){return this.authfirebase.createUserWithEmailAndPassword(o,b).then(E=>(E.user&&this.saveUserInfo(E.user.uid,o,b,A,w),E))}saveUserInfo(o,b,A,w,E){this.firestore.collection("Usuarios").doc(o).set({nombre:E,email:A,password:b,uid:o,rol:w})}getUserRole(){var o=this;return(0,c.Z)(function*(){const b=yield o.authfirebase.currentUser;b?o.firestore.collection("Usuarios").doc(b.uid).get().subscribe(A=>{if(A.exists){const E=A.data().rol;o.redirectByRole(E)}else o.router.navigate(["/login"])}):o.router.navigate(["/login"])})()}redirectByRole(o){switch(o){case"alumno":this.router.navigate(["/home"]);break;case"profesor":this.router.navigate(["/pro-home"])}}getQRCodeData(){return this.http.get("url_a_tu_base_de_datos")}}return(x=C).\u0275fac=function(o){return new(o||x)(m.LFG($.zQ),m.LFG(D.ST),m.LFG(W.F0))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),C})()}}]);